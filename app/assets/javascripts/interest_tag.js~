function other_function2(item,address)
{
//alert(address);
var dat = [];
var x;
$.ajaxSetup({
async: false
});
$.getJSON(address,function(data){
	$.each(data,function(index,element){
//	alert(element.text);
	dat.push({id: element.id, text: element.text});
	});
	}); 
return dat;
}


function interest_token_function(){
	$("#interest_tokens").select2({
		multiple: true,
		placeholder: "select your interests",
		ajax: {
		data: function(term,page){
			return{
				term: term,
				page: page
			};
		},
		dataType: "json",
		quietMillis: 100,
		results: function(data,page){
			return{results: data
		}
		},
		url: $("#interest_tokens").data('url')
		},
		initSelection: function(item,callback){
  	var address  = $(item).attr('data-prepopulate');
  	//var id,text;
  	//id = item.val();
  	//text = item.data('prepopulate');
  	//alert(id);
  	//alert(text);
  	var data = other_function2(item,address);
  //	alert(data);
  				return callback(data);
  				},
		createSearchChoice: function(term,data){
			if($(data).filter(function(){
			return this.text.localeCompare(term)===0;
			}).length===0){
					//return false;//
					return {
				 id: "<<<" + term+ ">>>",
				 text: term
			  };
				}
			}
		}).on('select2-selecting',function(e){
//alert(e.choice.text);
//alert(e.choice.id);
var address  = $('#interest_tokens').attr('data-add');
//alert(address);
var value = e.choice.id;
//alert(value);
$.post(address,{interest: value});
//alert(address);
}).on('select2-removing',function(e){
//alert(e.choice.text);
//alert(e.choice.id);
var address  = $('#interest_tokens').attr('data-remove');
//alert(address);
var value = e.choice.id;
//alert(value);
$.post(address,{interest: value});
//alert(address);
})
.select2('val',[]);
		}
